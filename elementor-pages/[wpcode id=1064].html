<!-- Top bar -->
<div class="bg-gray-100 text-sm text-center py-2" id="top-bar-nav">
  <a href="https://maps.app.goo.gl/w3FtkDDt9msZPQSZ8" target="_blank" rel="noopener noreferrer" class="hover:underline text-gray-800">
    Km 2.2 Vía Rionegro-Aeropuerto Portanova Medical Center Cons. 320-321
  </a>
</div>

<header class="bg-white shadow-md relative sticky top-0 z-50">
  <div class="max-w-[90rem] xl:max-w-screen-2xl mx-auto w-full flex justify-between items-center px-3 md:px-4 lg:px-6 py-3">
    <a href="/" class="flex-shrink-0">
      <img src="https://thetrueyou.com.co/wp-content/uploads/2025/08/logo-1-Photoroom-removebg-preview-1.png" class="h-16" alt="Logo" style="width: auto; height: 60px;" />
    </a>

    <!-- Menú Desktop -->
    <nav class="hidden md:flex gap-5 text-sm font-medium relative z-50 whitespace-nowrap flex-nowrap">
      <a href="/nosotros" class="hover:text-[#d9c3b9]">NOSOTROS</a>
      <a href="/medicina-interna" class="hover:text-[#d9c3b9]">MEDICINA INTERNA</a>

      <!-- CIRUGÍAS (drop + submenús a la derecha) -->
      <div class="relative group/menu">
        <button class="hover:text-[#d9c3b9]">CIRUGÍA PLÁSTICA</button>

        <!-- Nivel 1 (pegado, sin hueco) -->
        <div class="absolute top-full left-0 w-64 bg-white shadow-lg rounded-md hidden group-hover/menu:block z-50">
          <!-- Faciales (Nivel 2) -->
          <div class="relative group/item">
            <div class="px-4 py-2 font-semibold text-gray-700 flex items-center justify-between hover:bg-[#f8f1ee] rounded-t-md">
              Faciales <span class="ml-3">›</span>
            </div>
            <!-- Nivel 3 (a la derecha) -->
            <div class="absolute top-0 left-full ml-1 w-56 bg-white shadow-lg rounded-md hidden group-hover/item:block z-50">
              <a href="/lipopapada" class="block px-4 py-2 hover:bg-[#f8f1ee]">Lipopapada</a>
              <a href="/blefaroplastia" class="block px-4 py-2 hover:bg-[#f8f1ee]">Blefaroplastia</a>
              <a href="/mentoplastia" class="block px-4 py-2 hover:bg-[#f8f1ee]">Mentoplastia</a>
              <a href="/otoplastia" class="block px-4 py-2 hover:bg-[#f8f1ee]">Otoplastia</a>
              <a href="/rinoplastia" class="block px-4 py-2 hover:bg-[#f8f1ee]">Rinoplastia</a>
              <a href="/ritidoplastia" class="block px-4 py-2 hover:bg-[#f8f1ee]">Ritidoplastia</a>
            </div>
          </div>

          <div class="border-t my-1"></div>

          <!-- Corporales (Nivel 2) -->
          <div class="relative group/item">
            <div class="px-4 py-2 font-semibold text-gray-700 flex items-center justify-between hover:bg-[#f8f1ee]">
              Corporales <span class="ml-3">›</span>
            </div>
            <!-- Nivel 3 (a la derecha) -->
            <div class="absolute top-0 left-full ml-1 w-64 bg-white shadow-lg rounded-md hidden group-hover/item:block z-50">
              <a href="/mommy-makeover" class="block px-4 py-2 hover:bg-[#f8f1ee]">Mommy Makeover</a>
              <a href="/abdominoplastia" class="block px-4 py-2 hover:bg-[#f8f1ee]">Abdominoplastia</a>
              <a href="/cirugias-reconstructivas" class="block px-4 py-2 hover:bg-[#f8f1ee]">Cirugías reconstructivas</a>
              <a href="/gluteoplastia" class="block px-4 py-2 hover:bg-[#f8f1ee]">Gluteoplastia</a>
              <a href="/liposuccion" class="block px-4 py-2 hover:bg-[#f8f1ee]">Liposucción</a>
              <a href="/mamoplastia-aumento" class="block px-4 py-2 hover:bg-[#f8f1ee]">Mamoplastia de aumento</a>
              <a href="/mamoplastia-reduccion" class="block px-4 py-2 hover:bg-[#f8f1ee]">Mamoplastia de reducción</a>
              <a href="/mastopexia" class="block px-4 py-2 hover:bg-[#f8f1ee]">Levantamiento de senos</a>
              <a href="/explantacion-mamaria" class="block px-4 py-2 hover:bg-[#f8f1ee]">Explantación mamaria</a>
            </div>
          </div>

          <div class="border-t my-1"></div>

          <!-- Procedimientos menores (Nivel 2) -->
          <div class="relative group/item">
            <div class="px-4 py-2 font-semibold text-gray-700 flex items-center justify-between hover:bg-[#f8f1ee] rounded-b-md">
              Procedimientos menores <span class="ml-3">›</span>
            </div>
            <!-- Nivel 3 (a la derecha) -->
            <div class="absolute top-0 left-full ml-1 w-56 bg-white shadow-lg rounded-md hidden group-hover/item:block z-50">
              <a href="/toxina-botulinica" class="block px-4 py-2 hover:bg-[#f8f1ee]">Toxina Botulínica</a>
              <a href="/acido-hialuronico" class="block px-4 py-2 hover:bg-[#f8f1ee]">Ácido Hialurónico</a>
              <a href="/bioestimulantes" class="block px-4 py-2 hover:bg-[#f8f1ee]">Bioestimuladores</a>
            </div>
          </div>
        </div>
      </div>

      <a href="/sueroterapia-2" class="hover:text-[#d9c3b9]">SUEROTERAPIA</a>

      <!-- PRODUCTOS -->
      <div class="relative group">
        <button class="hover:text-[#d9c3b9]">PRODUCTOS</button>
        <div class="absolute top-full left-0 w-56 bg-white shadow-lg rounded-md hidden group-hover:block z-50">
          <a href="/productos-post-operatorio" class="block px-4 py-2 hover:bg-[#f8f1ee]">Post operatorio</a>
          <a href="/productos-medicina-interna" class="block px-4 py-2 hover:bg-[#f8f1ee]">Medicina interna</a>
        </div>
      </div>

      <a href="/donde-opero" class="hover:text-[#d9c3b9]">DONDE OPERAMOS</a>
      <a href="/contacto" class="hover:text-[#d9c3b9]">CONTACTO</a>
    </nav>

    <a href="#contacto" class="hidden md:inline bg-[#d9c3b9] hover:bg-[#c8a89e] text-white text-sm px-4 py-2 rounded-full scroll-to-contact flex-shrink-0">
      COTIZAR MI CITA
    </a>

    <!-- Icono hamburguesa -->
    <button id="menuToggle" class="md:hidden focus:outline-none" aria-controls="mobileMenu" aria-expanded="false">
      <svg class="w-8 h-8 text-gray-800" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
        <path d="M4 6h16M4 12h16M4 18h16"></path>
      </svg>
    </button>
  </div>

  <!-- Menú móvil -->
  <div id="mobileMenu" class="fixed top-0 right-0 h-full w-64 bg-white shadow-lg transform translate-x-full transition-transform duration-300 z-50 overflow-y-auto" aria-hidden="true">
    <div class="p-6">
      <button id="closeMenu" class="mb-6 focus:outline-none" aria-label="Cerrar menú">
        <svg class="w-6 h-6 text-gray-800" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
          <path d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>
      <nav class="flex flex-col gap-4 text-sm font-medium">
        <a href="/" class="hover:text-[#d9c3b9]">INICIO</a>
        <a href="/nosotros" class="hover:text-[#d9c3b9]">NOSOTROS</a>
        <a href="/medicina-interna" class="hover:text-[#d9c3b9]">MEDICINA INTERNA</a>

        <!-- CIRUGÍAS (móvil, colapsable multinivel) -->
        <div>
          <button class="text-left w-full hover:text-[#d9c3b9] font-semibold flex items-center justify-between" data-toggle="collapse" data-target="#m-cirugias" aria-expanded="false" aria-controls="m-cirugias">
            CIRUGÍA PLÁSTICA <span class="ml-2">▾</span>
          </button>
          <div id="m-cirugias" class="ml-2 mt-2 hidden">
            <!-- Faciales -->
            <button class="text-left w-full text-gray-700 font-semibold mt-2 flex items-center justify-between" data-toggle="collapse" data-target="#m-faciales" aria-expanded="false" aria-controls="m-faciales">
              Faciales <span class="ml-2">▾</span>
            </button>
            <div id="m-faciales" class="ml-4 mt-2 flex flex-col gap-2 hidden">
              <a href="/lipopapada" class="hover:text-[#d9c3b9]">Lipopapada</a>
              <a href="/blefaroplastia" class="hover:text-[#d9c3b9]">Blefaroplastia</a>
              <a href="/mentoplastia" class="hover:text-[#d9c3b9]">Mentoplastia</a>
              <a href="/otoplastia" class="hover:text-[#d9c3b9]">Otoplastia</a>
              <a href="/rinoplastia" class="hover:text-[#d9c3b9]">Rinoplastia</a>
              <a href="/ritidoplastia" class="hover:text-[#d9c3b9]">Ritidoplastia</a>
            </div>

            <!-- Corporales -->
            <button class="text-left w-full text-gray-700 font-semibold mt-3 flex items-center justify-between" data-toggle="collapse" data-target="#m-corporales" aria-expanded="false" aria-controls="m-corporales">
              Corporales <span class="ml-2">▾</span>
            </button>
            <div id="m-corporales" class="ml-4 mt-2 flex flex-col gap-2 hidden">
              <a href="/mommy-makeover" class="hover:text-[#d9c3b9]">Mommy Makeover</a>
              <a href="/abdominoplastia" class="hover:text-[#d9c3b9]">Abdominoplastia</a>
              <a href="/cirugias-reconstructivas" class="hover:text-[#d9c3b9]">Cirugías reconstructivas</a>
              <a href="/gluteoplastia" class="hover:text-[#d9c3b9]">Gluteoplastia</a>
              <a href="/liposuccion" class="hover:text-[#d9c3b9]">Liposucción</a>
              <a href="/mamoplastia-aumento" class="hover:text-[#d9c3b9]">Mamoplastia de aumento</a>
              <a href="/mamoplastia-reduccion" class="hover:text-[#d9c3b9]">Mamoplastia de reducción</a>
              <a href="/mastopexia" class="hover:text-[#d9c3b9]">Mastopexia - Levantamiento de senos</a>
              <a href="/explantacion-mamaria" class="hover:text-[#d9c3b9]">Explantación mamaria</a>
            </div>

            <!-- Procedimientos menores -->
            <button class="text-left w-full text-gray-700 font-semibold mt-3 flex items-center justify-between" data-toggle="collapse" data-target="#m-procmenores" aria-expanded="false" aria-controls="m-procmenores">
              Procedimientos menores <span class="ml-2">▾</span>
            </button>
            <div id="m-procmenores" class="ml-4 mt-2 flex flex-col gap-2 hidden">
              <a href="/toxina-botulinica" class="hover:text-[#d9c3b9]">Toxina Botulínica</a>
              <a href="/acido-hialuronico" class="hover:text-[#d9c3b9]">Ácido Hialurónico</a>
              <a href="/bioestimulantes" class="hover:text-[#d9c3b9]">Bioestimuladores</a>
            </div>
          </div>
        </div>

        <!-- PRODUCTOS (móvil) -->
        <div>
          <button class="text-left w-full hover:text-[#d9c3b9] font-semibold flex items-center justify-between" data-toggle="collapse" data-target="#m-productos" aria-expanded="false" aria-controls="m-productos">
            PRODUCTOS <span class="ml-2">▾</span>
          </button>
        <div id="m-productos" class="ml-2 mt-2 flex flex-col gap-2 hidden">
            <a href="/productos-post-operatorio" class="hover:text-[#d9c3b9]">Post operatorio</a>
            <a href="/productos-medicina-interna" class="hover:text-[#d9c3b9]">Medicina interna</a>
          </div>
        </div>

        <a href="/sueroterapia-2" class="hover:text-[#d9c3b9] font-semibold">SUEROTERAPIA</a>
        <a href="/donde-opero" class="hover:text-[#d9c3b9] font-semibold">DONDE OPERAMOS</a>
        <a href="/contacto" class="hover:text-[#d9c3b9] font-semibold">CONTACTO</a>
        <a href="#contacto" class="bg-[#d9c3b9] text-white px-4 py-2 mt-4 rounded-full text-center">COTIZAR MI CITA</a>
      </nav>
    </div>
  </div>

  <!-- JS: abrir/cerrar menú móvil -->
  <script>
    const toggle = document.getElementById('menuToggle');
    const close = document.getElementById('closeMenu');
    const mobileMenu = document.getElementById('mobileMenu');

    const openMenu = () => {
      mobileMenu.classList.remove('translate-x-full');
      mobileMenu.setAttribute('aria-hidden', 'false');
      toggle.setAttribute('aria-expanded', 'true');
    };
    const closeMenuFn = () => {
      mobileMenu.classList.add('translate-x-full');
      mobileMenu.setAttribute('aria-hidden', 'true');
      toggle.setAttribute('aria-expanded', 'false');
    };

    toggle.addEventListener('click', openMenu);
    close.addEventListener('click', closeMenuFn);

    document.addEventListener('click', (e) => {
      if (!mobileMenu.contains(e.target) && !toggle.contains(e.target)) {
        closeMenuFn();
      }
    });
  </script>

  <!-- JS: colapsables internos del menú móvil -->
  <script>
    document.addEventListener('click', (e) => {
      const btn = e.target.closest('[data-toggle="collapse"]');
      if (!btn) return;
      const targetSel = btn.getAttribute('data-target');
      const target = document.querySelector(targetSel);
      if (!target) return;
      const isHidden = target.classList.contains('hidden');
      const parent = btn.parentElement;
      parent.querySelectorAll(':scope > div[id]').forEach(div => {
        if (div !== target) div.classList.add('hidden');
      });
      target.classList.toggle('hidden', !isHidden);
      btn.setAttribute('aria-expanded', String(isHidden));
    });
  </script>

  <!-- JS: mantener visible solo la top bar correcta -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      document.querySelectorAll('div.bg-gray-100.text-sm.text-center.py-2').forEach((div) => {
        if (div.id !== 'top-bar-nav') {
          div.style.display = 'none';
        }
      });
    });
  </script>
</header>
