---
// BeforeAfterSlider component - Carrusel de antes y después con Swiper
interface Props {
  title?: string;
  subtitle?: string;
  description?: string;
  images: string[];
  buttonText?: string;
}

const {
  title = "Antes y después",
  subtitle = "RESULTADOS REALES",
  description = "Conseguir un resultado armonioso y natural es posible, conoce mis casos de éxito",
  images,
  buttonText = "AGENDAR CITA"
} = Astro.props;

const sliderId = `slider-${Math.random().toString(36).substring(7)}`;
---

<section class="bg-white py-20 px-6 text-center">
  <div class="max-w-6xl mx-auto">
    <h5 class="uppercase text-sm tracking-widest text-primary mb-2">{subtitle}</h5>
    <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-2">
      {title}
    </h2>
    <p class="text-sm text-gray-600 mb-10">
      {description}
    </p>

    <!-- Swiper -->
    <div class={`swiper ${sliderId}`}>
      <div class="swiper-wrapper">
        {images.map((image, index) => (
          <div class="swiper-slide">
            <img src={image} alt={`Antes y después ${index + 1}`} class="w-full h-auto object-cover" />
          </div>
        ))}
      </div>
      <div class="swiper-pagination mt-6"></div>
    </div>

    <a
      href="#contactForm"
      class="inline-block mt-8 bg-primary hover:bg-primary-hover text-white text-sm font-medium px-8 py-3 rounded-full transition scroll-to-contact"
    >
      {buttonText}
    </a>
  </div>
</section>

<script define:vars={{ sliderId }}>
  import('swiper').then(({ default: Swiper }) => {
    import('swiper/modules').then(({ Pagination, Autoplay }) => {
      new Swiper(`.${sliderId}`, {
        modules: [Pagination, Autoplay],
        loop: true,
        autoplay: {
          delay: 4000,
          disableOnInteraction: false,
        },
        slidesPerView: 1.2,
        spaceBetween: 0,
        pagination: {
          el: '.swiper-pagination',
          clickable: true,
        },
        breakpoints: {
          768: {
            slidesPerView: 2,
          },
          1024: {
            slidesPerView: 3,
          }
        }
      });
    });
  });
</script>
